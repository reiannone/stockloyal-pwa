<?php
declare(strict_types=1);

header('Content-Type: application/json; charset=utf-8');

require __DIR__ . '/_loadenv.php';

echo json_encode([
  'APP_ENV'      => getenv('APP_ENV') ?: '',
  'using_env'    => ($_ENV['APP_ENV'] ?? 'n/a'),
  '_ENV' => [
    'DB_HOST'     => $_ENV['DB_HOST']     ?? '(missing)',
    'DB_NAME'     => $_ENV['DB_NAME']     ?? '(missing)',
    'DB_USER'     => $_ENV['DB_USER']     ?? '(missing)',
    'DB_PASS'     => isset($_ENV['DB_PASS']) ? '(set)' : '(missing)',
    'DB_PORT'     => $_ENV['DB_PORT']     ?? '(missing)',
    'DB_SSL_MODE' => $_ENV['DB_SSL_MODE'] ?? '(missing)',
  ]
], JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES);
